<div class="container">
    <h2>Zinsrechner</h2>
    <div class="row">
        <div class="col-25">
            <label for="laufzeit">Laufzeit (Monate)</label>
        </div>
        <div class="col-75">
            <input
                type="number"
                id="laufzeit"
                name="laufzeit"
                [ngModel]="laufzeit()"
                (ngModelChange)="laufzeit.set($event)"
            />
        </div>
    </div>

    <div class="row">
        <div class="col-25">
            <label for="darlehen">Darlehen</label>
        </div>
        <div class="col-75">
            <input
                type="number"
                min="0"
                step="0.01"
                id="darlehen"
                name="darlehen"
                [ngModel]="darlehen()"
                (ngModelChange)="darlehen.set($event)"
            />
        </div>
    </div>

    <div class="row">
        <div class="col-25">
            <label for="zinsatz">Zinsatz (%)</label>
        </div>
        <div class="col-75">
            <input
                type="number"
                min="0"
                step="0.01"
                id="zinsatz"
                name="zinsatz"
                [ngModel]="zinsatz()"
                (ngModelChange)="zinsatz.set($event)"
            />
        </div>
    </div>

    <div class="row">
        <div class="col-25">
            <label for="tilgungsSatz">Tilgungssatz (%)</label>
        </div>
        <div class="col-75">
            <input
                type="number"
                min="0"
                step="0.01"
                id="tilgungsSatz"
                name="tilgungsSatz"
                [ngModel]="tilgungsSatz()"
                (ngModelChange)="tilgungsSatz.set($event)"
            />
        </div>
    </div>

    <div class="row">
        <div class="col-25">
            <label for="monatlicherBetrag">Monatlicher Betrag</label>
        </div>
        <div class="col-75">
            <input
                type="text"
                id="monatlicherBetrag"
                name="monatlicherBetrag"
                [value]="monatlicheAnnuitaet() !== null ? (monatlicheAnnuitaet() | number : '1.2-2') : ''"
                readonly
            />
        </div>
    </div>

    <div class="row">
        <div class="col-25">
            <label for="restbetrag">Restbetrag</label>
        </div>
        <div class="col-75">
            <input
                type="text"
                id="restbetrag"
                name="restbetrag"
                [value]="restbetrag() !== null ? (restbetrag() | number : '1.2-2') : ''"
                readonly
            />
        </div>
    </div>

    @if (error()) {
        <div class="row error">
            {{ error() }}
        </div>
    }

    <div class="row">
        <button id="calculate" (click)="calculate()" [disabled]="loading()">
            {{ loading() ? 'Berechne...' : 'Berechne Zahlungsplan' }}
        </button>
    </div>
</div>

<div class="container">
    <h2>Sondertilgung</h2>
    <div class="row">
        <div class="col-25">
            <label for="monatlicheSondertilgung">Monatliche Sondertilgung</label>
        </div>
        <div class="col-75">
            <input
                type="text"
                id="monatlicheSondertilgung"
                name="monatlicheSondertilgung"
                [value]="monatlicheSondertilgung() !== null ? (monatlicheSondertilgung() | number : '1.2-2') : ''"
                readonly
            />
        </div>
    </div>

    <div class="row">
        <div class="col-25">
            <label for="jaehrlicheSondertilgung">Jaehrliche Sondertilgung</label>
        </div>
        <div class="col-75">
            <input
                type="text"
                id="jaehrlicheSondertilgung"
                name="jaehrlicheSondertilgung"
                [value]="jaehrlicheSondertilgung() !== null ? (jaehrlicheSondertilgung() | number : '1.2-2') : ''"
                readonly
            />
        </div>
    </div>
</div>

@if (zahlungsplan().length > 0) {
    <div class="container">
        <h2>Finanzierungs Plan</h2>
        <table id="finanzierungsPlan">
            <tr>
                <th>Monat</th>
                <th>Anfang</th>
                <th>Zinsen</th>
                <th>Tilgung</th>
                <th>Ende</th>
            </tr>
            @for (item of zahlungsplan(); track item.monat) {
                <tr>
                    <td>{{ item.monat | number : '1.2-2' }}</td>
                    <td>{{ item.anfangsBestand | number : '1.2-2' }}</td>
                    <td>{{ item.zinsBetrag | number : '1.2-2' }}</td>
                    <td>{{ item.tilgungsBetrag | number : '1.2-2' }}</td>
                    <td>{{ item.endBestand | number : '1.2-2' }}</td>
                </tr>
            }
        </table>
    </div>
}
